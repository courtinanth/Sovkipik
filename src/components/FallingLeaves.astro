<div id="leaves-container" class="absolute inset-0 overflow-hidden pointer-events-none z-0"></div>

<script>
  import confetti from 'canvas-confetti';

  const container = document.getElementById('leaves-container');

  if (container) {
    const duration = 15 * 1000;
    const animationEnd = Date.now() + duration;
    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

    function randomInRange(min: number, max: number) {
      return Math.random() * (max - min) + min;
    }

    const interval: any = setInterval(function() {
      const timeLeft = animationEnd - Date.now();

      if (timeLeft <= 0) {
        return clearInterval(interval);
      }

      const particleCount = 50 * (timeLeft / duration);
      
      // Since particles fall down, start a bit higher than random
      confetti({
        ...defaults,
        particleCount: 1, // continuous trickle
        origin: { x: randomInRange(0.1, 0.9), y: -0.1 },
        colors: ['#2E7D32', '#795548', '#FF5722', '#F5F5DC'],
        shapes: ['circle', 'square'], // 'star' is also available, 'leaf' requires custom shape
        scalar: randomInRange(0.8, 1.2),
        gravity: randomInRange(0.4, 0.8),
        drift: randomInRange(-0.4, 0.4),
        ticks: 200 // exist longer
      });
    }, 200);
  }
</script>
